tosca_definitions_version: alien_dsl_1_4_0


metadata:
  template_name: janus.tests.datatypes.pub
  template_version: 1.0-SNAPSHOT
  template_author: Janus team

description: Public interface types for the complex data type demo.


imports:
  - tosca-normative-types:1.0.0-ALIEN14


data_types:
  janus.tests.datatypes.ComplexType:
    derived_from: tosca.datatypes.Root
    properties:
      literal:
        type: integer
      literalDefault:
        type: string
        default: ComplexDataTypeDefault
      mymap:
        type: map
        entry_schema: 
          type: integer
  janus.tests.datatypes.SubComplexType:
    derived_from: janus.tests.datatypes.ComplexType
  janus.tests.datatypes.BaseType:
    derived_from: tosca.datatypes.Root
    properties:
      nestedType:
        type: janus.tests.datatypes.NestedType
  janus.tests.datatypes.NestedType:
    derived_from: tosca.datatypes.Root
    properties:
      listofstring:
        type: list
        entry_schema:
            type: string
      subcomplex:
        type: janus.tests.datatypes.SubComplexType
      listofcomplex:
        type: list
        entry_schema:
          type: janus.tests.datatypes.ComplexType 
      mapofcomplex:
        type: map
        entry_schema:
          type: janus.tests.datatypes.ComplexType       

node_types:
  janus.tests.nodes.AbstractValueAssignmentNode:
    abstract: true
    derived_from: tosca.nodes.Root
    properties:
      empty:
        type: string
        required: false
      list:
        type: list
        entry_schema:
          type: string
      map:
        type: map
        entry_schema:
          type: string
      mapdef:
        type: map
        entry_schema:
          type: string
        default: { def1: "map 1 default value", def2: "map 1 default value"}
      baseComplex:
        type: janus.tests.datatypes.BaseType
    attributes:
      concat_attr: { concat: [get_property: [SELF, port], concat: ["something", concat: [concat: ["hello", get_operation_output: [SELF, Standard, create, CREATE_OUTPUT]], "!"]] ] }
    capabilities:
      endpoint:
        type: janus.tests.capabilities.ValueAssignmentEndpoint
    requirements:
      - host:
          capability: tosca.capabilities.Container
          relationship: tosca.relationships.HostedOn
      - server:
          capability: janus.tests.capabilities.ValueAssignmentEndpoint
          # relationship: janus.tests.relationships.ValueAssignmentConnectsTo
          occurrences: [0, 1]


capability_types:
  janus.tests.capabilities.ValueAssignmentEndpoint:
    derived_from: tosca.capabilities.Endpoint
